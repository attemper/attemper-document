(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{232:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),a("p",[t._v("通过任务编排，可以实现以下一些典型的需求")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),a("p",[t._v("当前，我们支持以下任务节点类型")]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),a("h4",{attrs:{id:"spring-boot-mvc-框架"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring-boot-mvc-框架","aria-hidden":"true"}},[t._v("#")]),t._v(" spring(boot/mvc)框架 "),a("Badge",{attrs:{text:"sdk1.0.0"}})],1),t._v(" "),a("p",[t._v("使用此类框架的任务，应使用调度中心提供的 sdk")]),t._v(" "),t._m(8),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/attemper/attemper-samples/tree/master/attemper-samples-spring-boot",target:"_blank",rel:"noopener noreferrer"}},[t._v("Spring Boot 项目对接示例"),a("OutboundLink")],1)]),t._v(" "),t._m(9),t._v(" "),t._m(10),a("p",[t._v("引入自动配置类:"),a("a",{attrs:{href:"https://github.com/attemper/attemper-samples/blob/master/attemper-samples-spring-boot/src/main/java/com/github/attemper/samples/SampleApplication.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考启动类配置"),a("OutboundLink")],1)]),t._v(" "),t._m(11),t._m(12),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/attemper/attemper-samples/tree/master/attemper-samples-spring",target:"_blank",rel:"noopener noreferrer"}},[t._v("Spring MVC 项目对接示例"),a("OutboundLink")],1)]),t._v(" "),t._m(13),t._v(" "),t._m(14),a("p",[t._v("引入自动配置类:"),a("a",{attrs:{href:"https://github.com/attemper/attemper-samples/blob/master/attemper-samples-spring/src/main/java/com/github/attemper/samples/spring/conf/ExecutorConfiguration.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考配置类"),a("OutboundLink")],1)]),t._v(" "),t._m(15),a("p",[t._v("spring boot/mvc 项目开发任务是通用的，原理是执行器通过调用 sdk 暴露的路由接口，以反射的方式调用 Bean 中的方法")]),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),a("p",[t._v("而如果需要在一个 Bean 中调用多个方法，则不需要使用这些接口，直接声明 public 方法即可")]),t._v(" "),t._m(19),t._v(" "),a("p",[t._v("支持以配置 http 的 url 的方式接入")]),t._v(" "),t._m(20),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/attemper/attemper-samples/blob/master/attemper-samples-task/src/main/java/com/github/attemper/samples/task/demo003/UriTaskController.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("URI 接入例子"),a("OutboundLink")],1)]),t._v(" "),t._m(21),t._v(" "),a("p",[t._v("执行器内置 Sql 任务，配置相应的数据源后，可在运行时执行 Sql 语句，目前支持")]),t._v(" "),t._m(22),t._v(" "),a("p",[a("router-link",{attrs:{to:"/feature/dispatch/arg.html#sql-语句-sql"}},[t._v("Sql 参数")])],1),t._v(" "),t._m(23),t._v(" "),a("p",[t._v("执行器内置 FTP 任务，主要有一下功能")]),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),a("p",[t._v("执行器内置邮件任务，抽取发送邮件的功能，有以下配置项")]),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),a("p",[t._v("支持执行 Linux 的 Bash 脚本")]),t._v(" "),t._m(29),t._v(" "),a("p",[t._v("支持执行 Windows 的 Cmd 脚本")]),t._v(" "),t._m(30),t._v(" "),a("p",[t._v("支持执行 Groovy 脚本")]),t._v(" "),t._m(31),t._v(" "),a("p",[t._v("通过指定开发语言，支持执行其他脚本语言，如 Python/Perl/Ruby 等")]),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),a("p",[t._v("目前支持 4 种触发器")]),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),a("p",[t._v("对于 HTTP 任务来说，因为需要调用接入的系统，所以要绑定被调系统的配置(地址)，调度中心支持为任务绑定 1 个项目。")]),t._v(" "),t._m(36),t._v(" "),a("p",[t._v("参见"),a("router-link",{attrs:{to:"/feature/application/project.html"}},[t._v("项目管理")])],1),t._v(" "),t._m(37),t._v(" "),a("p",[t._v("在任务中使用参数，有以下一些场景:")]),t._v(" "),t._m(38),t._v(" "),a("p",[t._v("参见"),a("router-link",{attrs:{to:"/feature/dispatch/arg.html"}},[t._v("参数管理")])],1),t._v(" "),t._m(39),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),t._m(42)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#任务","aria-hidden":"true"}},[this._v("#")]),this._v(" 任务")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定义","aria-hidden":"true"}},[this._v("#")]),this._v(" 定义")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("任务是调度中心执行的入口，任务由 "),s("code",[this._v("bpmn-js")]),this._v(" 通过拖拽的方式对任务节点进行设计，对任务形成流式编排。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("p",[this._v("串行\n节点按线条指向先后执行")])]),this._v(" "),s("li",[s("p",[this._v("并发\n一批节点可以并发执行后汇聚")])]),this._v(" "),s("li",[s("p",[this._v("分支判断\n根据参数判断条件，改变后续执行的走向")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"任务节点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#任务节点","aria-hidden":"true"}},[this._v("#")]),this._v(" 任务节点")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("任务节点，指任务中的一个节点，是调度中心的基本执行单元，它是由 "),s("code",[this._v("bpmn2.0")]),this._v(" 的基本元素以及本项目的一些扩展定制的元素实现的。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("服务任务节点\n"),a("ul",[a("li",[t._v("Http 任务\n"),a("ul",[a("li",[t._v("同步任务")]),t._v(" "),a("li",[t._v("异步任务")])])]),t._v(" "),a("li",[t._v("Sql 任务")]),t._v(" "),a("li",[t._v("Ftp 任务")]),t._v(" "),a("li",[t._v("邮件任务")])])]),t._v(" "),a("li",[t._v("脚本任务节点"),a("br"),t._v("\n可以直接执行脚本代码或文件\n"),a("ul",[a("li",[a("code",[t._v("Shell")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("Bash")]),t._v("\nLinux 上的 shell 脚本")]),t._v(" "),a("li",[a("code",[t._v("Cmd")]),t._v("\nWindows 上的命令行脚本")])])]),t._v(" "),a("li",[a("code",[t._v("Groovy")])]),t._v(" "),a("li",[a("code",[t._v("Python")]),t._v("/"),a("code",[t._v("Perl")]),t._v("/"),a("code",[t._v("Ruby")]),t._v("等")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"http-任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-任务","aria-hidden":"true"}},[this._v("#")]),this._v(" Http 任务")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("spring boot")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("框架依赖")]),this._v(" "),s("p",[this._v("JDK1.8 SpringBoot>=1.3.x")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-Markup line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-markup"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("properties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("sdk.version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.0.0"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("sdk.version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("properties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.github.attemper"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("attemper-java-sdk-micro-executor"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${sdk.version}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-Java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attemper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sdk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("micro"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("executor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecutorAutoConfiguration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecutorAutoConfiguration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("spring mvc")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("框架依赖")]),this._v(" "),s("p",[this._v("JDK>=1.6 Spring>=3.x")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-Markup line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-markup"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("properties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("sdk.version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.0.0"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("sdk.version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("properties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.github.attemper"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("attemper-java-sdk-rest-executor"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${sdk.version}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-Java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attemper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sdk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestConfiguration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attemper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sdk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("executor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestExecutorConfiguration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestConfiguration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestExecutorConfiguration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecutorRestClient")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("executorRestClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecutorRestClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("调用机制")]),this._v(" "),s("p",[this._v("同步调用:调度中心与被调用系统保持双向连接，直到任务执行结束或超时"),s("br"),this._v("\n异步调用:调度中心在调用后，即进行锁等待，被调用系统需在任务执行结束或超时后，通知调度中心")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("sdk 中为接入的系统提供了四个任务模板接口"),s("br"),this._v("\n所在包："),s("code",[this._v("com.github.attemper.java.sdk.rest.executor.template")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("接口名")]),t._v(" "),a("th",[t._v("参数")]),t._v(" "),a("th",[t._v("返回值")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Executing")]),t._v(" "),a("td",[t._v("无")]),t._v(" "),a("td",[t._v("无")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("ExecutingWithParam")]),t._v(" "),a("td",[t._v("有")]),t._v(" "),a("td",[t._v("无")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("ExecutingWithResult")]),t._v(" "),a("td",[t._v("无")]),t._v(" "),a("td",[t._v("有")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("ExecutingWithParamAndResult")]),t._v(" "),a("td",[t._v("有")]),t._v(" "),a("td",[t._v("有")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"其他-http-任务-非-java-语言的-spring-框架的-web-项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他-http-任务-非-java-语言的-spring-框架的-web-项目","aria-hidden":"true"}},[this._v("#")]),this._v(" 其他 Http 任务(非 java 语言的 spring 框架的 web 项目)")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("请求类型\n"),a("ul",[a("li",[t._v("POST")]),t._v(" "),a("li",[t._v("GET")]),t._v(" "),a("li",[t._v("PUT")]),t._v(" "),a("li",[t._v("DELETE")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"sql-任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sql-任务","aria-hidden":"true"}},[this._v("#")]),this._v(" Sql 任务")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("select\n查询的结果集为\n"),a("ul",[a("li",[t._v("对象\n字符串、整数等单行单列")]),t._v(" "),a("li",[t._v("Map\n单行多列")]),t._v(" "),a("li",[t._v("List\n多行多列")])])]),t._v(" "),a("li",[t._v("insert\n执行插入语句")]),t._v(" "),a("li",[t._v("update\n执行更新语句")]),t._v(" "),a("li",[t._v("delete\n执行删除语句")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"ftp-任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ftp-任务","aria-hidden":"true"}},[this._v("#")]),this._v(" Ftp 任务")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("上传\n将本地文件上传至 FTP 服务器")]),this._v(" "),s("li",[this._v("下载\n将 FTP 服务器上的文件下载到本地磁盘")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"邮件任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#邮件任务","aria-hidden":"true"}},[this._v("#")]),this._v(" 邮件任务")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("blockquote",[a("p",[t._v("发送方:发送方的邮箱账号，为空时取系统级配置"),a("code",[t._v("spring.mail.username")]),t._v("的值"),a("br"),t._v("\n接收方:接收方的邮箱账号，多个以,隔开"),a("br"),t._v("\n邮件主题:邮件的标题"),a("br"),t._v("\n邮件内容:邮件的正文内容，支持"),a("code",[t._v("Html")]),t._v("和模板语言"),a("code",[t._v("FreeMarker")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("注意")]),this._v(" "),s("p",[this._v("使用时请接收方注意邮件是否被视作垃圾邮件而存入垃圾箱中")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"shell-bash"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#shell-bash","aria-hidden":"true"}},[this._v("#")]),this._v(" Shell-Bash")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"shell-cmd"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#shell-cmd","aria-hidden":"true"}},[this._v("#")]),this._v(" Shell-Cmd")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"groovy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#groovy","aria-hidden":"true"}},[this._v("#")]),this._v(" Groovy")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"python-perl-ruby-等"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#python-perl-ruby-等","aria-hidden":"true"}},[this._v("#")]),this._v(" Python/Perl/Ruby 等")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("注意")]),this._v(" "),s("p",[this._v("若执行器在非容器环境启动，则应当在系统中安装相应的脚本执行环境"),s("br"),this._v("\n若执行器以镜像方式启动，则必须自制包含 JRE8+和相应脚本执行环境的镜像")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"触发器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#触发器","aria-hidden":"true"}},[this._v("#")]),this._v(" 触发器")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("p",[t._v("Cron 触发器")]),t._v(" "),a("ul",[a("li",[t._v("Quartz 框架原生支持，使用广泛")]),t._v(" "),a("li",[t._v("配置 Cron 表达式，比如"),a("code",[t._v("0 0 12 * * ?")]),t._v(" "),a("code",[t._v("0 0/5 * * * ?")])]),t._v(" "),a("li",[t._v("调度中心提供在线配置工具，辅助配置 Cron 表达式")])])]),t._v(" "),a("li",[a("p",[t._v("日程偏移触发器")]),t._v(" "),a("ul",[a("li",[t._v("本项目扩展，主要用来支持与日历相关的时间节点调度，比如每周/月/年的第一个交易日等")]),t._v(" "),a("li",[t._v("应用场景：周报、月报、半年报、年报的发送；定点推送等")])])]),t._v(" "),a("li",[a("p",[t._v("每日周期触发器")]),t._v(" "),a("ul",[a("li",[t._v("Quartz 框架原生支持，主要是解决 Cron 表达式的局限")]),t._v(" "),a("li",[t._v("支持在每一天设置开始和结束时刻，如上午 9:30 到下午 15:00")]),t._v(" "),a("li",[t._v("支持跨越时间单位，如每 90 分钟")])])]),t._v(" "),a("li",[a("p",[t._v("日历周期触发器")]),t._v(" "),a("ul",[a("li",[t._v("Quartz 框架原生支持，使用较少")]),t._v(" "),a("li",[t._v("支持比如从设置的开始时间起，每隔一天/周/月/年执行一次")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目","aria-hidden":"true"}},[this._v("#")]),this._v(" 项目")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("注意")]),this._v(" "),s("p",[this._v("任务不指定项目时，调度中心默认会找项目的根服务的配置")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数","aria-hidden":"true"}},[this._v("#")]),this._v(" 参数")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("p",[t._v("参数注入")]),t._v(" "),a("ul",[a("li",[t._v("运行时执行器将参数传递给接入的系统(HTTP 任务)")]),t._v(" "),a("li",[t._v("运行时将参数传递给脚本任务(比如 Shell、Python 任务)")])])]),t._v(" "),a("li",[a("p",[t._v("参数传递")]),t._v(" "),a("ul",[a("li",[t._v("运行时替换任务的配置(比如按日期生成的文件目录)")]),t._v(" "),a("li",[t._v("前置任务执行结果作为参数，传递给后置任务")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"条件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#条件","aria-hidden":"true"}},[this._v("#")]),this._v(" 条件")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("注意")]),this._v(" "),s("p",[this._v("在某些场景，每日只执行一次的任务配置成轮询是不得已的，因为任务上下游或者自身的依赖在起初并不满足。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("本项目将这种需求抽取为依赖"),s("strong",[this._v("条件")]),this._v("，目前抽取了三种依赖条件:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("SQL\n在所配数据源中，执行 SQL 语句，能够查到数据则视为满足条件")]),this._v(" "),s("li",[this._v("FTP 文件\n在所配服务器中检测文件是否存在(生成)，存在则视为满足条件")]),this._v(" "),s("li",[this._v("本地文件\n在执行该任务的执行器本地(若执行器由 Docker 启动，可能需要挂载)检测文件是否存在，存在则视为满足条件")])])}],!1,null,null,null);s.default=n.exports}}]);